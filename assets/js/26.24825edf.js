(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{489:function(a,e,t){"use strict";t.r(e);var s=t(1),r=Object(s.a)({},function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"lnmp安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lnmp安装","aria-hidden":"true"}},[a._v("#")]),a._v(" LNMP安装")]),a._v(" "),t("h2",{attrs:{id:"安装nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装Nginx")]),a._v(" "),t("h3",{attrs:{id:"下载nginx预编译包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载nginx预编译包","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载Nginx预编译包")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://nginx.org/en/download.html"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"解压压缩包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压压缩包","aria-hidden":"true"}},[a._v("#")]),a._v(" 解压压缩包")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("[root@Hyui-VM ~]# mkdir nginx \n[root@Hyui-VM ~]# mv nginx-1.19.0.tar.gz ./nginx\n[root@Hyui-VM ~]# cd nginx/\n[root@Hyui-VM nginx]# tar -zxvf nginx-1.19.0.tar.gz\n[root@Hyui-VM nginx]# ls\nnginx-1.19.0  nginx-1.19.0.tar.gz\n[root@Hyui-VM nginx]# cd nginx-1.19.0\n[root@Hyui-VM nginx-1.19.0]# ls\nauto  CHANGES  CHANGES.ru  conf  configure  contrib  html  LICENSE  man  README  src\n")])])]),t("h3",{attrs:{id:"安装依赖软件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖软件","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装依赖软件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum install gcc gcc-c++ cyrus-sasl-md5 openssl openssl-devel -y\n")])])]),t("h3",{attrs:{id:"编译安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译安装","aria-hidden":"true"}},[a._v("#")]),a._v(" 编译安装")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 将ssl模块也编译入nginx\n./configure --prefix=/usr/local/nginx/ --with-http_ssl_module\nmake && make install\n")])])]),t("h3",{attrs:{id:"运行nginx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" 运行Nginx")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("./sbin/nginx\nps -aux | grep nginx\nroot     17033  0.0  0.0  45976  1120 ?        Ss   16:30   0:00 nginx: master process ./sbin/nginx\nnobody   17034  0.0  0.0  46416  2112 ?        S    16:30   0:00 nginx: worker process\nroot     17060  0.0  0.0 112812   972 pts/1    S+   16:33   0:00 grep --color=auto nginx\n")])])]),t("h3",{attrs:{id:"将nginx放入systemd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将nginx放入systemd","aria-hidden":"true"}},[a._v("#")]),a._v(" 将Nginx放入systemd")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /usr/lib/systemd/system/nginx.service\n[Unit]\nDescription=Nginx # 描述Nginx信息\nDocumentation=http://nginx.org/ \nAfter=network.target remote-fs.target nss-lookup.target # 表明依赖服务\n\n[Service]\nType=forking # 启动时关系的定义\nPIDFile=/usr/local/nginx/logs/nginx.pid # PID文件\nExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf # 启动Nginx使用的命令\nExecReload=/bin/kill -s HUP $MAINPID # 重启Nginx命令\nExecStop=/bin/kill -s QUIT $MAINPID # 停止Nginx命令\nPrivateTmp=true # 给服务分配独立的临时空间\n\n[Install]\nWantedBy=multi-user.target\n")])])]),t("h2",{attrs:{id:"安装php"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装php","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装PHP")]),a._v(" "),t("h3",{attrs:{id:"下载预编译包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载预编译包","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载预编译包")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.php.net/downloads",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://www.php.net/downloads"),t("OutboundLink")],1)]),a._v(" "),t("h3",{attrs:{id:"添加www用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加www用户","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加www用户")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("groupadd www\nuseradd -s /sbin/nologin -g www -M www\n")])])]),t("h3",{attrs:{id:"解压预编译包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压预编译包","aria-hidden":"true"}},[a._v("#")]),a._v(" 解压预编译包")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir php\nmv php-7.2.31.tar.gz php\ntar -zxvf php-7.2.31.tar.gz\n")])])]),t("h3",{attrs:{id:"安装依赖软件-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖软件-2","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装依赖软件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("yum install gcc autoconf gcc-c++ libxml2 libxml2-devel openssl openssl-devel bzip2 bzip2-devel libcurl libcurl-devel libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel gmp gmp-devel readline readline-devel libxslt libxslt-devel systemd-devel openjpeg-devel\n")])])]),t("h3",{attrs:{id:"开始编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始编译","aria-hidden":"true"}},[a._v("#")]),a._v(" 开始编译")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("mkdir /usr/local/php7.2\n./configure --prefix=/usr/local/php7.2 --with-config-file-path=/usr/local/php7.2/etc --with-zlib-dir --with-freetype-dir --enable-mbstring --with-libxml-dir=/usr --enable-xmlreader --enable-xmlwriter --enable-soap --enable-calendar --with-curl --with-zlib --with-gd --with-pdo-sqlite --with-pdo-mysql --with-mysqli --with-mysql-sock --enable-mysqlnd --disable-rpath --enable-inline-optimization --with-bz2 --with-zlib --enable-sockets --enable-sysvsem --enable-sysvshm --enable-pcntl --enable-mbregex --enable-exif --enable-bcmath --with-mhash --enable-zip --with-pcre-regex --with-jpeg-dir=/usr --with-png-dir=/usr --with-openssl --enable-ftp --with-kerberos --with-gettext --with-xmlrpc --with-xsl --enable-fpm --with-fpm-user=php-fpm --with-fpm-group=php-fpm --with-fpm-systemd --disable-fileinfo\nmake && make install\n")])])]),t("h3",{attrs:{id:"配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 配置文件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cd /usr/local/php7.2/etc\nmv php-fpm.conf.default php-fpm.conf\n# 编辑配置文件\nvim php-fpm.conf\n# 将pid = run/php-fpm.pid前的“;”注释删除\ncd /usr/local/php7.2/etc/php-fpm.d\nmv www.conf.default www.conf\nvim www.conf\n# 修改其中的user和group项user = www，group = www\n")])])]),t("h3",{attrs:{id:"运行php-fpm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行php-fpm","aria-hidden":"true"}},[a._v("#")]),a._v(" 运行php-fpm")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("/usr/local/php7.2/sbin/php-fpm\n# 检查启动状态\nps -aux | grep php\n")])])]),t("h3",{attrs:{id:"修改nginx配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改nginx配置文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改Nginx配置文件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("vim /usr/local/nginx/conf/nginx.conf\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 修改user项为www\nuser  www;\n")])])]),t("div",{staticClass:"language-conf extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# 去掉以下location的注释 并将fastcgi_param项中的/scripts修改为$document_root\nlocation ~ \\.php$ {\n            root           html;\n            fastcgi_pass   127.0.0.1:9000;\n            fastcgi_index  index.php;\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n\n")])])]),t("h2",{attrs:{id:"安装mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装MySQL")]),a._v(" "),t("h3",{attrs:{id:"下载mysql的rpm包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载mysql的rpm包","aria-hidden":"true"}},[a._v("#")]),a._v(" 下载MySQL的rpm包")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("wget http://repo.mysql.com/mysql57-community-release-el7-11.noarch.rpm\n# 安装MySQL5.7的rpm包\nrpm -ivh mysql57-community-release-el7-11.noarch.rpm\n# 更新源\nyum update -y \n# 安装mysql\nyum install mysql-server -y\n")])])]),t("h3",{attrs:{id:"启动mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动MySQL")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("systemctl start mysqld  # 开启\nsystemctl restart mysqld  # 重启\nsystemctl stop mysqld  # 关闭\n")])])]),t("h3",{attrs:{id:"登录mysql"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#登录mysql","aria-hidden":"true"}},[a._v("#")]),a._v(" 登录MySQL")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("cat /var/log/mysqld.log | grep password\nmysql -u root -p  # 会要求输入root密码\n")])])]),t("h3",{attrs:{id:"修改root密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改root密码","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改root密码")]),a._v(" "),t("div",{staticClass:"language-mysql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("alter user 'root'@'localhost' identified by 'Aa123456.';  #密码最好要有大小写和符号\n")])])]),t("h3",{attrs:{id:"设置有密码外部访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置有密码外部访问","aria-hidden":"true"}},[a._v("#")]),a._v(" 设置有密码外部访问")]),a._v(" "),t("div",{staticClass:"language-mysql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("use mysql;  # 选择mysql数据库\nupdate user set host='%' where User='root';  # 修改user表中User=\"root\"的行中的host值为\"%\"\nflush privileges;  # 刷新\n")])])])])},[],!1,null,null,null);e.default=r.exports}}]);